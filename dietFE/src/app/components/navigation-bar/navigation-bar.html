<nav class="navbar navbar-expand-lg shadow-sm navbar-light bg-white border-bottom">
  <div class="container">

    <!-- Brand / Logo -->
    <a class="navbar-brand fw-bold d-flex align-items-center" routerLink="/">
      <span
        class="rounded-circle d-inline-flex align-items-center justify-content-center me-2"
        style="width: 32px; height: 32px; background: linear-gradient(135deg, #28a745, #20c997); color: #fff; font-size: 1.1rem;"
      >
        ðŸ¥—
      </span>
      <span>
        Personalised Diet Platform
        <small class="d-block text-muted fw-normal" style="font-size: 0.7rem;">
          Eat better â€¢ Live healthier
        </small>
      </span>
    </a>

    <!-- Mobile toggler -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-lg-center">

        <!-- Home -->
        <li class="nav-item">
          <a class="nav-link me-3" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact:true}">
            <i class="bi bi-house-door me-1"></i> Home
          </a>
        </li>

        <!-- CLIENT INFO (Only visible when logged in non-admin) -->
        <li
          class="nav-item"
          *ngIf="(authService.isloggedIn$ | async) === true && (authService.isAdmin$ | async) === false"
        >
          <a class="nav-link me-3" routerLink="/client-info" routerLinkActive="active">
            <i class="bi bi-person-badge me-1"></i> Client Info
          </a>
        </li>

        <!-- DIET PLAN (visible only to normal logged-in users) -->
        <li
          class="nav-item"
          *ngIf="(authService.isloggedIn$ | async) === true && (authService.isAdmin$ | async) === false"
        >
          <a
            class="nav-link me-3 px-3 py-1 rounded-pill text-white"
            style="background: linear-gradient(135deg, #20c997, #198754);"
            routerLink="/diet-plan"
            routerLinkActive="active"
          >
            <i class="bi bi-activity me-1"></i> My Diet Plan
          </a>
        </li>

        <!-- ABOUT -->
        <li class="nav-item">
          <a class="nav-link me-3" routerLink="/about" routerLinkActive="active">
            <i class="bi bi-info-circle me-1"></i> About
          </a>
        </li>

        <!-- CONTACT -->
        <li class="nav-item">
          <a class="nav-link me-3" routerLink="/contact" routerLinkActive="active">
            <i class="bi bi-envelope me-1"></i> Contact
          </a>
        </li>

        <!-- ADMIN PANEL (admins only) -->
        <li class="nav-item" *ngIf="(authService.isAdmin$ | async) === true">
          <a class="nav-link me-3" routerLink="/admin" routerLinkActive="active">
            <i class="bi bi-speedometer2 me-1"></i> Admin Panel
          </a>
        </li>

        <!-- LOGIN (when NOT logged in) -->
        <li
          class="nav-item ms-lg-3 mt-2 mt-lg-0"
          *ngIf="(authService.isloggedIn$ | async) === false"
        >
          <a
            class="btn btn-success rounded-pill px-4"
            routerLink="/login"
          >
            <i class="bi bi-box-arrow-in-right me-1"></i> Login
          </a>
        </li>

        <!-- PROFILE DROPDOWN (when logged in) -->
        <li
          class="nav-item dropdown ms-lg-3 mt-2 mt-lg-0"
          *ngIf="(authService.isloggedIn$ | async) === true"
        >
          <a
            href="#"
            class="nav-link p-0"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <div
              class="user-circle hover-effect d-flex align-items-center justify-content-center"
              style="
                width: 38px;
                height: 38px;
                border-radius: 50%;
                background: linear-gradient(135deg, #0d6efd, #6610f2);
                color: #fff;
                font-weight: 600;
              "
            >
              {{ (authService.currentUser$ | async)?.charAt(0) | uppercase }}
            </div>
          </a>

          <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0">
            <li class="dropdown-header small text-muted">
              {{ authService.currentUser$ | async }}
            </li>
            <li>
              <button class="dropdown-item" routerLink="/profile" type="button">
                <i class="bi bi-person-circle me-1"></i> Profile
              </button>
            </li>
            <li><hr class="dropdown-divider" /></li>
            <li>
              <button class="dropdown-item text-danger" type="button" (click)="onLogout()">
                <i class="bi bi-box-arrow-right me-1"></i> Logout
              </button>
            </li>
          </ul>
        </li>

      </ul>
    </div>

  </div>
</nav>
